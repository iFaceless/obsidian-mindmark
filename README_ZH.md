# Mindmark - Obsidian 思维导图插件

一款功能强大的 Obsidian 思维导图插件，支持将 Markdown 列表和多级标题渲染为交互式思维导图。

![列表语法示例](assets/examples/list-syntax-1.png)

[English Documentation](README.md)

---

## ✨ 特色功能

### 🎨 两种渲染模式
- **Outline View（大纲视图）**：从左到右的水平布局，适合展示层级结构
- **Radial Mind Map（放射状思维导图）**：左右对称的放射布局，适合展示中心主题

### 🎨 丰富的主题系统
- **13 种预设主题**：包括 Default、Dark、Darcula、Dracula、Monokai、Solarized Dark/Light、Ocean、Forest、Sunset、Lavender、Mint、Rose
- **自定义主题**：支持创建和保存个人配色方案
- **5 种颜色配置**：画布背景色、字体颜色、节点背景色、线框颜色、连线颜色
- **实时预览**：修改颜色后立即应用到所有思维导图

### 📝 智能内容识别
- **多级标题模式**：自动识别 `##`、`###` 等多级标题，标题下的内容作为备注
- **列表模式**：支持 `-` 或 `*` 开头的缩进列表，`#` 作为根标题

### 🎯 交互体验
- **点击展开/折叠**：点击节点或圆圈即可展开或折叠子节点
- **备注展示**：支持 Markdown 格式的备注内容，点击 📝 图标在右侧面板查看
- **缩放控制**：
  - 缩放百分比选择器（25%、50%、75%、100%、125%、150%、200%、300%、400%）
  - +/- 按钮缩放
  - 鼠标滚轮缩放（可配置）
  - 触控板捏合缩放（macOS，可配置）
  - 触摸屏双指缩放（可配置）
  - 重置缩放按钮
- **平移支持**：鼠标拖拽平移画布
- **全屏模式**：点击全屏按钮进入沉浸式查看体验，主题色自动同步
- **一键复制**：点击 📷 按钮将思维导图复制为高清 PNG 图片
- **全部展开/折叠**：一键展开（⊞）或折叠（⊟）所有节点

### 🎨 视觉设计
- **专业配色**：多种主题可选，适应不同场景
- **自适应布局**：自动居中显示，支持任意尺寸
- **平滑动画**：面板滑入滑出，操作流畅
- **预览模式优化**：在预览模式下正确显示，无横向滚动问题

## 📦 安装方法

### 手动安装
1. 下载插件并解压
2. 将文件夹重命名为 `obsidian-mindmap`
3. 复制到 Obsidian 插件目录：
   - **macOS**: `~/Library/Application Support/obsidian/plugins/`
   - **Windows**: `%APPDATA%\obsidian/plugins/`
   - **Linux**: `~/.config/obsidian/plugins/`
4. 在 Obsidian 设置 → 第三方插件中启用 "Mindmark"

### 开发安装
```bash
git clone https://github.com/iFaceless/obsidian-mindmap.git
cd obsidian-mindmap
npm install
npm run build
```

## 🚀 使用方法

### 基础用法

在 Obsidian 笔记中创建代码块，使用 `mindmap` 作为语言标识符：

````markdown
```mindmap
- 核心架构
  - Model（大脑）
    - 选择原则：业务需求导向
    - 多模型策略
  - Tools（手臂）
    - 检索现实信息
    - 执行动作
  - Orchestration Layer
    - 规划
    - 记忆管理
```
````

### 多级标题模式

使用 Markdown 多级标题创建思维导图，标题下的内容会自动识别为备注：

````markdown
```mindmap
## 技术
### 基础知识
基础知识是**长期主义**的投资，短期内看不到明显收益，但决定了职业天花板。

#### 算法
刷题策略与心得：
- **LeetCode Hot 100** 是最核心的题库，优先搞定
- 常见题型：`*` 表示高频
  - 1. 链表：`反转链表`、`环形链表`、`合并 K 个有序链表`
  - 2. 二叉树：`层序遍历`、`路径总和`、`最近公共祖先`
  - 3. 动态规划：`背包问题`、`最长递增子序列`、`编辑距离`
  - 4. DFS/BFS：`岛屿数量`、`课程表`、`矩阵最短路径`
- 面试技巧：**先讲思路，再写代码，最后分析复杂度**
```
````

### 列表模式（带根标题）

使用 `#` 标题后的内容作为根节点，子节点使用 `-` 或 `*`：

````markdown
```mindmap
# Day_1_v4

## 介绍
- 定义：结合模型、工具、orchestration层的AI系统
- 目标：从预测性AI过渡至自主代理

## 核心架构
- Model（大脑）
  - 选择原则：业务需求导向
  - 多模型策略：根据任务特点选用不同模型
- Tools（手臂）
  - 功能分类：检索现实信息、执行动作
- Orchestration Layer（神经网络）
  - 角色：规划、记忆管理、决策执行
```
````

## 🎮 交互操作

| 操作 | 功能 |
|------|------|
| **点击节点文字** | 展开或折叠子节点 |
| **点击空心圆** | 展开或折叠子节点 |
| **点击 📝 图标** | 在右侧面板显示备注内容 |
| **点击画布空白处** | 隐藏备注面板 |
| **鼠标拖拽** | 平移画布 |
| **鼠标滚轮** | 缩放画布（需在设置中启用） |
| **触控板捏合** | 缩放画布（macOS，需在设置中启用） |
| **触摸屏双指** | 缩放画布（需在设置中启用） |
| **点击 +/- 按钮** | 放大/缩小 |
| **选择缩放比例** | 从下拉菜单选择常用缩放比例 |
| **点击 🎯 按钮** | 重置缩放和位置 |
| **点击 📷 按钮** | 复制为 PNG 图片 |
| **点击 ⛶ 按钮** | 切换全屏模式 |
| **点击 ⊞ 按钮** | 全部展开节点 |
| **点击 ⊟ 按钮** | 全部折叠节点 |
| **下拉选择** | 切换渲染模式 |

## ⚙️ 设置选项

### 主题设置
- **Theme**：选择预设主题或 Custom 自定义模式
- **Save current settings as custom theme**：保存当前颜色设置为自定义主题（仅在 Custom 模式下显示）
- **Delete custom theme**：删除自定义主题（仅在 Custom 模式下显示）

### 颜色设置（仅在 Custom 模式下显示）
- **Canvas background color**：画布背景色
- **Font color**：节点文字颜色
- **Node background color**：节点背景色
- **Line color**：节点边框和轮廓颜色
- **Connection color**：节点间连线颜色

### 通用设置
- **Default render mode**：选择默认渲染模式（Outline View / Radial Mind Map）
- **Enable mouse wheel zoom**：启用鼠标滚轮缩放（默认关闭）
- **Enable pinch zoom**：启用触控板捏合缩放和触摸屏双指缩放（默认关闭）
- **Note panel width**：备注面板宽度（200-800px）

### 预设主题列表

| 主题名称 | 风格 | 适用场景 |
|---------|------|---------|
| Default | 白底黑字，紫色线条 | 通用场景 |
| Dark | 深色主题 | 深色模式 |
| Darcula | IntelliJ IDEA 经典深色 | 开发者 |
| Dracula | 流行深色主题 | 开发者 |
| Monokai | 经典代码编辑器主题 | 开发者 |
| Solarized Dark | Solarized 深色 | 开发者 |
| Solarized Light | Solarized 浅色 | 开发者 |
| Ocean | 海洋蓝色系 | 清新风格 |
| Forest | 森林绿色系 | 自然风格 |
| Sunset | 日落橙红色系 | 温暖风格 |
| Lavender | 薰衣草紫色系 | 优雅风格 |
| Mint | 薄荷青色系 | 清新风格 |
| Rose | 玫瑰粉色系 | 柔和风格 |

## 📸 渲染效果

### 列表语法示例
![列表语法示例](assets/examples/list-syntax-1.png)

### 列表语法示例（展开）
![列表语法示例展开](assets/examples/list-syntax-2.png)

### 多级标题语法示例
![多级标题示例](assets/examples/multi-level-1.png)

### 多级标题语法示例（带备注）
![多级标题示例带备注](assets/examples/multi-level-2.png)

### 设置界面
![设置界面](assets/settings.png)

## 💡 使用技巧

1. **快速切换模式**：使用控制面板的下拉菜单快速切换渲染模式
2. **主题切换**：根据场景选择合适的主题，或创建自定义主题
3. **精确缩放**：使用缩放百分比选择器快速跳转到常用缩放比例
4. **全屏查看**：点击全屏按钮进入沉浸式查看模式，主题色自动同步
5. **导出图片**：点击 📷 按钮将思维导图复制为高清 PNG，可直接粘贴到文档中
6. **备注管理**：在多级标题模式下，标题下的所有内容都会作为备注，支持完整的 Markdown 格式
7. **智能识别**：插件会自动识别内容类型，无需手动选择模式
8. **自定义主题**：调整颜色后保存为自定义主题，方便后续使用
9. **快速导航**：使用 ⊞ 全部展开或 ⊟ 全部折叠，快速浏览或整理思维导图

## 🔧 开发

```bash
# 安装依赖
npm install

# 开发模式（自动重新构建）
npm run dev

# 生产构建
npm run build
```

## 📝 更新日志

### v1.2.0
- ✨ 添加全部展开（⊞）和全部折叠（⊟）按钮到控制面板
- ✨ 添加 macOS 触控板捏合缩放支持（wheel + ctrlKey）
- ✨ 添加 Safari gesture 事件捏合缩放支持
- ✨ 添加触摸屏双指捏合缩放支持
- 🐛 修复叶子节点矩形框右侧多余线段问题
- 🎨 优化连接线终点，保持一致的 3px 间距
- 🎨 统一左右两侧圆圈半径为 5

### v1.1.0
- ✨ 添加完整的主题系统，支持 13 种预设主题
- ✨ 支持自定义主题创建、保存和删除
- ✨ 添加缩放百分比选择器（25%-400%）
- ✨ 添加全屏模式，主题色自动同步
- 🐛 修复预览模式下备注面板显示问题
- 🐛 修复预览模式下画布宽度溢出问题
- 🐛 修复全屏模式切换时的背景色闪烁问题
- 🎨 将设置页面重命名为 "Mindmark Settings"

### v1.0.0
- ✨ 支持两种渲染模式：Outline View 和 Radial Mind Map
- ✨ 智能内容识别：多级标题模式和列表模式
- ✨ 右侧备注面板，支持 Markdown 渲染
- ✨ 一键复制为高清 PNG 图片
- ✨ 点击节点展开/折叠功能
- ✨ 缩放和平移支持
- 🎨 专业的视觉设计

## 📄 许可证

MIT License

## 🤝 贡献

欢迎提交 Issue 和 Pull Request！

## 📧 联系方式

- GitHub: [iFaceless/obsidian-mindmap](https://github.com/iFaceless/obsidian-mindmap)